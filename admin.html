<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin - Prashant Public</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#fffaf0;color:#222;padding:12px}
  h1{background:#ff6f00;color:#fff;padding:12px;border-radius:6px}
  .card{background:#fff;padding:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.08);margin-top:12px}
  label{display:block;margin:8px 0 4px;font-weight:bold}
  input,textarea,select{width:100%;padding:8px;border-radius:6px;border:1px solid #ddd;box-sizing:border-box}
  textarea{min-height:90px}
  button{background:#ff6f00;color:#fff;padding:10px 14px;border:none;border-radius:6px;cursor:pointer;margin-top:10px}
  small{color:#666}
  .ok{color:green;font-weight:bold}
  .err{color:red;font-weight:bold}
</style>
</head>
<body>
<h1>Admin Panel ‚Äî Prashant Public</h1>

<div class="card">
  <small>‡§π‡§æ ‡§™‡•Ö‡§®‡§≤ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§≤‡§æ GitHub ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§•‡•á‡§ü ‡§´‡§æ‡§à‡§≤‡•ç‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡§¶‡§§ ‡§ï‡§∞‡•á‡§≤.</small>

  <label>GitHub Owner (username)</label>
  <input id="owner" placeholder="‡§â‡§¶‡§æ. dadakadam843-star" value="dadakadam843-star"/>

  <label>GitHub Repo (‡§â‡§¶‡§æ. prashant-Public)</label>
  <input id="repo" placeholder="‡§â‡§¶‡§æ. prashant-Public" value="prashant-Public"/>

  <label>Branch (‡§∏‡§æ‡§ß‡§æ‡§∞‡§£: main)</label>
  <input id="branch" value="main"/>

  <label>Personal Access Token (PAT) ‚Äî (‡§ó‡•Å‡§™‡•Ä‡§§ ‡§†‡•á‡§µ‡§æ)</label>
  <input id="token" type="password" placeholder="Token ‡§Ø‡•á‡§•‡•á ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§æ"/>

  <hr>

  <label>Site Title</label><input id="title" value="‡§™‡•ç‡§∞‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§≤‡•ç‡§™‡§®‡§æ ‡§∞‡§æ‡§ú‡•Ç ‡§ï‡§¶‡§Æ ‚Äì ‡§ó‡§∞‡•Ä‡§¨ ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ"/>
  <label>Slogan</label><input id="slogan" value="‡§ú‡§®‡§§‡•á‡§∏‡§æ‡§†‡•Ä ‡§∏‡•á‡§µ‡§æ, ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏‡§æ‡§ö‡•Ä ‡§∏‡§æ‡§•"/>
  <label>Sub text</label><input id="sub" value="‡§™‡•ç‡§∞‡§∂‡§æ‡§Ç‡§§ ‚Äî ‡§≠‡§æ‡§∞‡§§ ‡§®‡§ó‡§∞, ‡§™‡•ç‡§∞‡§≠‡§æ‡§ó ‡§ï‡•ç‡§∞.3"/>

  <label>About</label><textarea id="about">‡§Æ‡•Ä ‡§™‡•ç‡§∞‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§≤‡•ç‡§™‡§®‡§æ ‡§∞‡§æ‡§ú‡•Ç ‡§ï‡§¶‡§Æ ‚Äî ‡§ó‡§∞‡•Ä‡§¨ ‡§®‡•á‡§§‡•É‡§§‡•ç‡§µ. ‡§Æ‡•Ä ‡§ó‡§∞‡•Ä‡§¨ ‡§µ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡§®‡§§‡•á‡§∏‡§æ‡§†‡•Ä ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•ã.</textarea>

  <label>Phone</label><input id="phone" value="8484078016"/>
  <label>Area</label><input id="area" value="‡§≠‡§æ‡§∞‡§§ ‡§®‡§ó‡§∞, ‡§™‡•ç‡§∞‡§≠‡§æ‡§ó ‡§ï‡•ç‡§∞.3, ‡§∏‡§æ‡§Ç‡§ó‡§≤‡•Ä‚Äì‡§Æ‡§ø‡§∞‡§ú‚Äì‡§ï‡•Å‡§™‡§µ‡§æ‡§°"/>

  <label>Today message</label><textarea id="today">üëâ ‚Äú‡§ú‡§®‡§§‡•á‡§ö‡•ç‡§Ø‡§æ ‡§π‡§ï‡•ç‡§ï‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§Æ‡•ç‡§π‡•Ä ‡§∏‡§¶‡•à‡§µ ‡§§‡§§‡•ç‡§™‡§∞‚Äù</textarea>

  <label>Facebook</label><input id="facebook" value="https://www.facebook.com/share/17ajVkgqU3/"/>
  <label>Instagram</label><input id="instagram" value="https://www.instagram.com/dadakadam1"/>

  <label>Upload Hero Photo (your-photo.jpg)</label>
  <input id="photofile" type="file" accept="image/*"/>

  <p><small>‡§™‡§π‡§ø‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§¶‡§æ content.json ‡§´‡§æ‡§à‡§≤ ‡§®‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§π‡§æ ‡§™‡•Ö‡§®‡§≤ ‡§§‡•Ä ‡§¨‡§®‡§µ‡•á‡§≤.</small></p>

  <button id="saveBtn">Save & Publish to GitHub</button>
  <div id="status"></div>
</div>

<script>
const baseAPI='https://api.github.com';
function setStatus(msg,ok){document.getElementById('status').innerHTML = msg ? '<p class="'+(ok?'ok':'err')+'">'+msg+'</p>':''}
async function apiGet(url, token){return fetch(url,{headers:{Authorization:'token '+token,Accept:'application/vnd.github.v3+json'}})}
async function getFileSha(owner,repo,path,branch,token){
  const url=`${baseAPI}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${branch}`;
  const res=await apiGet(url,token);
  if(res.status===200){const j=await res.json();return j.sha}
  return null;
}
async function putFile(owner,repo,path,contentBase64,message,branch,token,sha=null){
  const url=`${baseAPI}/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`;
  const body={message,content:contentBase64,branch}; if(sha) body.sha=sha;
  const res = await fetch(url,{method:'PUT',headers:{Authorization:'token '+token,Accept:'application/vnd.github.v3+json'},body:JSON.stringify(body)});
  return res;
}
function fileToBase64(file){return new Promise((res,rej)=>{const reader=new FileReader();reader.onload=()=>res(reader.result.split(',')[1]);reader.onerror=rej;reader.readAsDataURL(file)})}

document.getElementById('saveBtn').addEventListener('click',async()=>{
  setStatus('Saving...',true);
  const owner=document.getElementById('owner').value.trim();
  const repo=document.getElementById('repo').value.trim();
  const branch=document.getElementById('branch').value.trim()||'main';
  const token=document.getElementById('token').value.trim();
  if(!owner||!repo||!token){setStatus('Owner, repo ‡§Ü‡§£‡§ø token ‡§≠‡§∞‡§æ.',false);return;}
  const content={
    title:document.getElementById('title').value,
    slogan:document.getElementById('slogan').value,
    sub:document.getElementById('sub').value,
    about:document.getElementById('about').value,
    today:document.getElementById('today').value,
    phone:document.getElementById('phone').value,
    area:document.getElementById('area').value,
    facebook:document.getElementById('facebook').value,
    instagram:document.getElementById('instagram').value,
    photo:'your-photo.jpg'
  };
  try{
    const path='content.json';
    const base64Content=btoa(unescape(encodeURIComponent(JSON.stringify(content,null,2))));
    const sha=await getFileSha(owner,repo,path,branch,token);
    const msg = sha ? 'Update content.json via Admin Panel' : 'Create content.json via Admin Panel';
    const res1=await putFile(owner,repo,path,base64Content,msg,branch,token,sha);
    if(!res1.ok){const e=await res1.json();throw new Error('content.json ‡§Ö‡§™‡§≤‡•ã‡§° ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: '+(e.message||res1.status));}

    const photoInput=document.getElementById('photofile');
    if(photoInput.files && photoInput.files[0]){
      setStatus('Uploading photo...',true);
      const base64Photo=await fileToBase64(photoInput.files[0]);
      const photoPath='your-photo.jpg';
      const shaPhoto=await getFileSha(owner,repo,photoPath,branch,token);
      const res2=await putFile(owner,repo,photoPath,base64Photo,'Update photo via Admin Panel',branch,token,shaPhoto);
      if(!res2.ok){const e=await res2.json();throw new Error('Photo ‡§Ö‡§™‡§≤‡•ã‡§° ‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: '+(e.message||res2.status));}
    }
    setStatus('Published successfully! GitHub repo ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§¨‡§¶‡§≤ ‡§ù‡§æ‡§≤‡•á ‡§Ü‡§π‡•á‡§§.',true);
  }catch(err){console.error(err);setStatus('‡§§‡•ç‡§∞‡•Å‡§ü‡•Ä: '+err.message,false);}
});
</script>
</body>
</html>
